<!-- <div *ngFor="let message of messages">
    {{message.username}}:
    {{message.text}}
</div>
<input [(ngModel)]="message"/>
<button (click)="sendMessage()">Send</button>
<input #user/>
<button (click)="setUsername(user.value)">Enter Username</button> -->
    <div @slide="state" class="row chat-window col-xs-5 col-md-3" style="margin-left:10px;">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading top-bar">
                    <div class="col-md-6 col-xs-6">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-comment"></span> Chat</h3>
                    </div>
                    <div class="col-xs-6" style="text-align: right;">
                        <a href="#">
                          <span *ngIf="state === 'active'" (click)="toggleOpen()" class="glyphicon glyphicon-minus icon_minim"></span>
                          <span *ngIf="state === 'inactive'" (click)="toggleOpen()" class="glyphicon glyphicon-plus icon_minim"></span>
                        </a>
                        <a href="#"><span class="glyphicon glyphicon-remove icon_close"></span></a>
                    </div>
                </div>
                <div  *ngIf="username" class="panel-body msg_container_base" #scrollMe >
                    <div class="row msg_container base_sent">
                        <div class="col-md-10 col-xs-10">
                            <div class="messages msg_sent">
                                <p>Welcome to the Summit chat service. Type a message below to contact a customer service representative.</p>
                                <time datetime="2009-11-13T20:00">Summit • 51 min</time>
                            </div>
                        </div>
                        <div class="col-md-2 col-xs-2 avatar">
                            <img src="pacman.png">
                        </div>
                    </div>
                  <div *ngFor="let message of messages">
                    <div class="row msg_container {{message.username === 'summit' ? 'base_sent' : 'base_receive'}}">
                        <div *ngIf="message.username !== 'summit'" class="col-md-2 col-xs-2 avatar">
                            <img src="pacman.png">
                        </div>
                        <div class="col-md-10 col-xs-10">
                            <div class="messages">
                                <p>{{message.text}}</p>
                                <time datetime="2009-11-13T20:00">{{message.username}} • 51 min</time>
                            </div>
                        </div>
                        <div *ngIf="message.username === 'summit'" class="col-md-2 col-xs-2 avatar">
                            <img src="pacman.png">
                        </div>
                    </div>
                </div>
                </div>

                <div  class="panel-footer">
                    <div *ngIf="!username" class="input-group">
                        <input #username (keyup.enter)="setUsername(username.value)" type="text" class="form-control input-sm chat_input" placeholder="Enter Username"  />
                        <span class="input-group-btn">
                        <button class="btn btn-primary btn-sm" (click)="setUsername(username.value)" >Enter</button>
                        </span>
                    </div>
                    <div *ngIf="username" class="input-group">
                        <input [(ngModel)]="message" type="text" class="form-control input-sm chat_input" placeholder="Write your message here..." (keyup.enter)="sendMessage()" autofocus/>
                        <span class="input-group-btn">
                        <button class="btn btn-primary btn-sm"(click)="sendMessage()">Send</button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

<!-- $(document).on('click', '.panel-heading span.icon_minim', function(e) {
   let $this = $(this);
   if (!$this.hasClass('panel-collapsed')) {
     $this.parents('.panel').find('.panel-body').slideUp();
     $this.addClass('panel-collapsed');
     $this.removeClass('glyphicon-minus').addClass('glyphicon-plus');
   } else {
     $this.parents('.panel').find('.panel-body').slideDown();
     $this.removeClass('panel-collapsed');
     $this.removeClass('glyphicon-plus').addClass('glyphicon-minus');
   }
 });
 $(document).on('focus', '.panel-footer input.chat_input', function(e) {
   let $this = $(this);
   if ($('#minim_chat_window').hasClass('panel-collapsed')) {
     $this.parents('.panel').find('.panel-body').slideDown();
     $('#minim_chat_window').removeClass('panel-collapsed');
     $('#minim_chat_window').removeClass('glyphicon-plus').addClass('glyphicon-minus');
   }
 });
 $(document).on('click', '#new_chat', function(e) {
   let size = $('.chat-window:last-child').css('margin-left');
   let size_total = parseInt(size) + 400;
   alert(size_total);
   let clone = $('#chat_window_1').clone().appendTo('.container');
   clone.css('margin-left', size_total);
 });
 $(document).on('click', '.icon_close', function(e) {
   // $(this).parent().parent().parent().parent().remove();
   $('#chat_window_1').remove();
 }); -->
